<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Active Invest School ‚Äî –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–∫–ª–∞–¥–Ω–æ–≥–æ –≤—ñ–¥—Å–æ—Ç–∫–∞</title>
  <meta name="color-scheme" content="light dark" />
  <meta name="description" content="–î–≤–∞ –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∏: –±–∞–∑–æ–≤–∏–π —Å–∫–ª–∞–¥–Ω–æ–≥–æ –≤—ñ–¥—Å–æ—Ç–∫–∞ —Ç–∞ '–¶—ñ–ª—ñ' (–ø—ñ–¥–±—ñ—Ä –≤–Ω–µ—Å–∫—É/—Ç–µ—Ä–º—ñ–Ω—É/—Å—Ç–∞—Ä—Ç—É –∑ –≤–∞—Ä—ñ–∞—Ü—ñ—è–º–∏). UA." />

  <style>
    :root{
      --brand-1:#0b8a4b; --brand-2:#003906; --brand-3:#295e4c;
      --accent-1:#b67900; --accent-2:#d3a000;
      --ink:#e5e7eb; --muted:#9ca3af; --line:#24303a; --page:#0b0f19; --panel:#0f1623; --warn:#f59e0b;
    }
    *{ box-sizing:border-box }
    html,body{ margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,sans-serif; color:var(--ink); background:var(--page) }

    header{ background:linear-gradient(135deg,var(--brand-2),var(--brand-3)); color:#fff }
    .wrap{ max-width:1000px; margin:0 auto; padding:16px }
    .topbar{ display:flex; align-items:center; gap:12px }
    .logo{ width:40px; height:40px; border-radius:8px; object-fit:contain; background:#fff1; padding:4px }
    h1{ margin:4px 0 0; font-size:22px; line-height:1.25 }
    .subtitle{ opacity:.9; margin-top:4px; font-size:14px }
    .hero-info{ background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,0)); border:1px solid var(--line); border-radius:16px; padding:14px; margin-top:12px; font-size:14px }
    @media (max-width:420px){ h1{ font-size:18px } }

    .grid{ display:grid; gap:16px; grid-template-columns:1fr; padding:16px }
    @media (min-width:960px){ .grid{ grid-template-columns:1.2fr .8fr } }

    .card{ background:var(--panel); border:1px solid var(--line); border-radius:16px; padding:16px }
    .row{ display:grid; gap:12px; grid-template-columns:1fr }
    @media (min-width:680px){ .row{ grid-template-columns:1fr 1fr } }
    label{ display:block; font-size:14px; font-weight:600; margin-bottom:6px }
    input,select{ width:100%; padding:10px 12px; border-radius:12px; border:1px solid var(--line); background:var(--panel); color:var(--ink); font-size:16px; min-width:0 }
    .hint{ font-size:12px; color:var(--muted); margin-top:6px }

    .btn{ appearance:none; border:0; border-radius:12px; padding:14px 16px; font-weight:700; cursor:pointer }
    .btn-primary{ background:var(--accent-2); color:#1a1a1a } .btn-primary:hover{ background:var(--accent-1) }
    .btn-ghost{ background:#111826; color:#cbd5e1; border:1px dashed #ffffff26 }
    @media (max-width:560px){ .btn{ width:100% } }

    .results{ display:flex; flex-direction:column; gap:12px }
    .badge{ display:inline-block; padding:4px 8px; border-radius:999px; background:#ffffff20; border:1px dashed #ffffff40; font-size:12px }
    .result-box{ background:linear-gradient(135deg,var(--brand-1),var(--brand-3)); color:#fff; border-radius:14px; padding:16px; display:flex; flex-direction:column; gap:6px }
    .result-box .sum{ font-size:32px; font-weight:800 }

    .chart-card{ background:var(--panel); border:1px solid var(--line); border-radius:16px; padding:16px }
    #chartWrap{ position:relative }
    canvas{ width:100%; height:280px; display:block; border:1px solid var(--line); border-radius:12px; background:var(--panel) }
    #chartTip{ position:absolute; pointer-events:none; transform:translate(-50%,-110%); background:#111; color:#fff; padding:6px 8px; border-radius:8px; font-size:12px; white-space:nowrap; border:1px solid #ffffff22; box-shadow:0 4px 14px #0005 }
    #chartTip::after{ content:""; position:absolute; left:50%; bottom:-6px; transform:translateX(-50%); border:6px solid transparent; border-top-color:#111 }

    .table-wrap{ overflow:auto; max-height:340px; border:1px solid var(--line); border-radius:12px; background:var(--panel) }
    table{ width:100%; border-collapse:collapse; font-size:12px }
    th,td{ padding:8px 10px; border-bottom:1px solid var(--line); text-align:right; white-space:nowrap }
    th:first-child,td:first-child{ text-align:left }

    .cta{ background:linear-gradient(135deg,var(--brand-1),var(--brand-3)); color:#fff; border-radius:16px; padding:18px; display:flex; flex-direction:column; gap:8px; align-items:flex-start }
    .cta .btn{ background:#fff; color:#133 } .cta .btn:hover{ background:#f8f8f8 }

    .unit-wrap{ display:flex; flex-direction:column; gap:6px }
    .unit-tabs{ display:none; gap:8px }
    .unit-tab{ flex:1; padding:10px 12px; border-radius:10px; border:1px solid var(--line); background:var(--panel); color:#fff; cursor:pointer; font-weight:600; width:100% }
    .unit-tab[aria-pressed="true"]{ background:var(--accent-2); color:#111; border-color:transparent }
    .unit-select{ display:block }
    @media (min-width:560px){ .unit-tabs{ display:flex } .unit-select{ display:none } }

    .goal-note{ font-size:12px; color:var(--warn); margin-top:6px }
    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace }
    .muted-box{ background:#ffffff08; border:1px dashed var(--line); border-radius:12px; padding:12px }
  </style>
</head>

<body>
  <header>
    <div class="wrap">
      <div class="topbar">
        <img class="logo" src="assets/logo.png" alt="Active Invest School –ª–æ–≥–æ—Ç–∏–ø" onerror="this.style.display='none'">
        <div>
          <h1>Active Invest School ‚Äî –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–∫–ª–∞–¥–Ω–æ–≥–æ –≤—ñ–¥—Å–æ—Ç–∫–∞</h1>
          <div class="subtitle">–î–≤–∞ –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∏: –ë–∞–∑–æ–≤–∏–π —Ç–∞ üéØ –¶—ñ–ª—ñ</div>
        </div>
      </div>
      <div class="hero-info">
        <b>–ë–∞–∑–æ–≤–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</b>: –≤–≤–µ–¥–∏ P0/PMT/—Å—Ç–∞–≤–∫—É/–∫–∞–ø—ñ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—é/—Ç–µ—Ä–º—ñ–Ω ‚Äî –æ—Ç—Ä–∏–º–∞—î—à –ø—ñ–¥—Å—É–º–æ–∫, –≥—Ä–∞—Ñ—ñ–∫, —Ç–∞–±–ª–∏—Ü—é.<br>
        <b>üéØ –¶—ñ–ª—ñ</b>: –ø—Ä–∞—Ü—é—î –æ–∫—Ä–µ–º–æ. –í–∫–∞–∂–∏ —Ü—ñ–ª—å, —Å—Ç–∞–≤–∫—É, –∫–∞–ø—ñ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—é —Ç–∞ —Ç–µ—Ä–º—ñ–Ω (–∞–±–æ —É–≤—ñ–º–∫–Ω–∏ ¬´–æ–±—á–∏—Å–ª–∏—Ç–∏ —Ç–µ—Ä–º—ñ–Ω¬ª), –¥–∞–ª—ñ –æ–±–µ—Ä–∏: <i>–≤–Ω–µ—Å–æ–∫</i>, <i>—Ç–µ—Ä–º—ñ–Ω</i> –∞–±–æ <i>–ø–æ—á–∞—Ç–∫–æ–≤—É —Å—É–º—É</i> ‚Äî –ø–ª—é—Å –≤–∞—Ä—ñ–∞—Ü—ñ—ó.
      </div>
    </div>
  </header>

  <main class="wrap">
    <div class="grid">
      <!-- ===== –ë–ê–ó–û–í–ò–ô –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† ===== -->
      <section class="card">
        <div class="badge">–ë–∞–∑–æ–≤–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</div>

        <div class="row" style="margin-top:6px">
          <div>
            <label>–í–∞–ª—é—Ç–∞</label>
            <select id="currency">
              <option value="UAH">‚Ç¥ UAH</option>
              <option value="USD" selected>$ USD</option>
              <option value="EUR">‚Ç¨ EUR</option>
            </select>
          </div>

          <div>
            <label>–ß–∞—Å—Ç–æ—Ç–∞ –∫–∞–ø—ñ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—ó</label>
            <select id="m">
              <option value="12" selected>–ú—ñ—Å—è—á–Ω–æ (12√ó/—Ä—ñ–∫)</option>
              <option value="4">–ö–≤–∞—Ä—Ç–∞–ª—å–Ω–æ (4√ó/—Ä—ñ–∫)</option>
              <option value="2">–ü—ñ–≤—Ä—ñ—á–Ω–æ (2√ó/—Ä—ñ–∫)</option>
              <option value="1">–†—ñ—á–Ω–æ (1√ó/—Ä—ñ–∫)</option>
            </select>
            <div class="hint">–í–Ω–µ—Å–æ–∫ –∑–∞–≤–∂–¥–∏ —â–æ–º—ñ—Å—è—á–Ω–∏–π; –∫–∞–ø—ñ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—è ‚Äî –∫–æ–ª–∏ –¥–æ–¥–∞—é—Ç—å—Å—è %.</div>
          </div>
        </div>

        <div class="row" style="margin-top:8px">
          <div>
            <label>–ü–æ—á–∞—Ç–∫–æ–≤–∞ —Å—É–º–∞</label>
            <input id="p0" type="number" min="0" step="0.01" value="0">
          </div>
          <div>
            <label>–©–æ–º—ñ—Å—è—á–Ω–∏–π –≤–Ω–µ—Å–æ–∫</label>
            <input id="pmt" type="number" min="0" step="0.01" value="100">
          </div>
        </div>

        <div class="row" style="margin-top:8px">
          <div>
            <label>–†—ñ—á–Ω–∞ —Å—Ç–∞–≤–∫–∞, %</label>
            <input id="rate" type="number" min="0" step="0.01" value="8">
            <details class="muted-box" style="margin-top:6px">
              <summary style="cursor:pointer"><b>–ü—ñ–¥–∫–∞–∑–∫–∞ –ø—Ä–æ —Å—Ç–∞–≤–∫—É (—Ä–∏–Ω–∫–æ–≤—ñ –æ—Ä—ñ—î–Ω—Ç–∏—Ä–∏)</b></summary>
              <div class="hint" style="margin-top:8px; line-height:1.6">
                ‚Ä¢ –î–µ–ø–æ–∑–∏—Ç–∏/–û–í–î–ü/Treasuries: ~3‚Äì6% —É $ (–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Ü–∏–∫–ª—É —Å—Ç–∞–≤–æ–∫).<br>
                ‚Ä¢ –Ü–Ω–≤–µ—Å—Ç-–≥—Ä–µ–π—Ç –æ–±–ª—ñ–≥–∞—Ü—ñ—ó: ~3‚Äì6% —É $.<br>
                ‚Ä¢ –®–∏—Ä–æ–∫–∏–π —ñ–Ω–¥–µ–∫—Å –∞–∫—Ü—ñ–π: ~6‚Äì10% —É $ (–¥–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–æ; –≤–æ–ª–∞—Ç–∏–ª—å–Ω—ñ—Å—Ç—å –≤–∏—Å–æ–∫–∞).<br>
                ‚Ä¢ 60/40 –ø–æ—Ä—Ç—Ñ–µ–ª—å: ~5‚Äì8% —É $. –¶–µ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è ‚Äî –º–æ–¥–µ–ª—é–π—Ç–µ –¥–µ–∫—ñ–ª—å–∫–∞ —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤ (5%, 8%, 10%).
              </div>
            </details>
          </div>
          <div>
            <label>–¢–µ—Ä–º—ñ–Ω —ñ–Ω–≤–µ—Å—Ç—É–≤–∞–Ω–Ω—è</label>
            <div class="row" style="grid-template-columns:2fr 1fr">
              <input id="periodCount" type="number" min="1" step="1" value="5">
              <div class="unit-wrap">
                <div class="unit-tabs" id="unitTabs" role="tablist" aria-label="–û–¥–∏–Ω–∏—Ü—è">
                  <button type="button" class="unit-tab" data-unit="years" aria-pressed="true">—Ä–æ–∫–∏</button>
                  <button type="button" class="unit-tab" data-unit="months" aria-pressed="false">–º—ñ—Å—è—Ü—ñ</button>
                </div>
                <select id="periodUnit" class="unit-select">
                  <option value="years" selected>—Ä–æ–∫–∏</option>
                  <option value="months">–º—ñ—Å—è—Ü—ñ</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap">
          <button class="btn btn-primary" id="calcBtn">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏</button>
          <button class="btn btn-ghost" id="resetBtn">–°–∫–∏–Ω—É—Ç–∏</button>
        </div>
      </section>

      <!-- ===== –†–ï–ó–£–õ–¨–¢–ê–¢–ò / –ì–†–ê–§–Ü–ö / –¢–ê–ë–õ–ò–¶–Ø ===== -->
      <section class="card results">
        <div><span class="badge">–†–µ–∑—É–ª—å—Ç–∞—Ç (–±–∞–∑–æ–≤–∏–π)</span></div>
        <div class="result-box">
          <div>–ß–µ—Ä–µ–∑ <b id="resHorizon">‚Äî</b> –≤–∏ –º–∞—Ç–∏–º–µ—Ç–µ</div>
          <div class="sum" id="resAmount">‚Äî</div>
        </div>

        <div class="chart-card">
          <div class="hint" style="margin-bottom:6px">–ì—Ä–∞—Ñ—ñ–∫ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è –±–∞–ª–∞–Ω—Å—É (–Ω–æ–º—ñ–Ω–∞–ª)</div>
          <div id="chartWrap">
            <canvas id="chart" width="900" height="300"></canvas>
            <div id="chartTip" hidden></div>
          </div>
        </div>

        <div class="table-wrap">
          <table id="preview">
            <thead>
              <tr>
                <th>–ú—ñ—Å—è—Ü—å</th>
                <th>–ë–∞–ª–∞–Ω—Å –Ω–∞ –ø–æ—á.</th>
                <th>–í–Ω–µ—Å–æ–∫</th>
                <th>–ù–∞—Ä–∞—Ö. %</th>
                <th>–ë–∞–ª–∞–Ω—Å –Ω–∞ –∫—ñ–Ω.</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="hint">–ü–æ–∫–∞–∑–∞–Ω–æ –ø–µ—Ä—à—ñ 12 –º—ñ—Å—è—Ü—ñ–≤. % –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –ª–∏—à–µ –≤ –º—ñ—Å—è—Ü—å –∫–∞–ø—ñ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—ó.</div>
      </section>
    </div>

    <!-- ===== CTA ===== -->
    <section class="cta" style="margin:16px 0">
      <div style="font-size:18px;font-weight:800">–ü–æ—Ç—Ä—ñ–±–µ–Ω –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏–π —Ä–æ–∑–±—ñ—Ä –ø–æ—Ä—Ç—Ñ–µ–ª—è?</div>
      <div>–û—Ç—Ä–∏–º–∞–π—Ç–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é –≤—ñ–¥ –µ–∫—Å–ø–µ—Ä—Ç—ñ–≤ Active Invest School ‚Äî –ø—ñ–¥–±—ñ—Ä —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó, —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ —Ü—ñ–ª–µ–π —ñ —Ä–∏–∑–∏–∫-–ø—Ä–æ—Ñ—ñ–ª—é.</div>
      <a class="btn" href="https://www.instagram.com/stories/kristina_bessolova" target="_blank" rel="noopener">–û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é</a>
    </section>

    <!-- ===== üéØ –¶–Ü–õ–Ü ‚Äî –ü–û–í–ù–Ü–°–¢–Æ –ù–ï–ó–ê–õ–ï–ñ–ù–ò–ô –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† ===== -->
    <section class="card" style="margin:16px 0">
      <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
        <span class="badge">üéØ –¶—ñ–ª—ñ (–Ω–µ–∑–∞–ª–µ–∂–Ω–∏–π)</span>
        <div class="hint">–û–±—á–∏—Å–ª—é—î–º–æ –≤–Ω–µ—Å–æ–∫, —Ç–µ—Ä–º—ñ–Ω –∞–±–æ —Å—Ç–∞—Ä—Ç–æ–≤—É —Å—É–º—É + –≤–∞—Ä—ñ–∞—Ü—ñ—ó</div>
      </div>

      <!-- –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ ¬´–¶—ñ–ª–µ–π¬ª: –æ–∫—Ä–µ–º–∞ –≤–∞–ª—é—Ç–∞/—Å—Ç–∞–≤–∫–∞/–∫–∞–ø—ñ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—è/—Ç–µ—Ä–º—ñ–Ω -->
      <div class="row">
        <div>
          <label>–í–∞–ª—é—Ç–∞ (–¶—ñ–ª—ñ)</label>
          <select id="goalCurrency">
            <option value="UAH">‚Ç¥ UAH</option>
            <option value="USD" selected>$ USD</option>
            <option value="EUR">‚Ç¨ EUR</option>
          </select>
        </div>
        <div>
          <label>–ß–∞—Å—Ç–æ—Ç–∞ –∫–∞–ø—ñ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—ó (–¶—ñ–ª—ñ)</label>
          <select id="goalM">
            <option value="12" selected>–ú—ñ—Å—è—á–Ω–æ (12√ó/—Ä—ñ–∫)</option>
            <option value="4">–ö–≤–∞—Ä—Ç–∞–ª—å–Ω–æ (4√ó/—Ä—ñ–∫)</option>
            <option value="2">–ü—ñ–≤—Ä—ñ—á–Ω–æ (2√ó/—Ä—ñ–∫)</option>
            <option value="1">–†—ñ—á–Ω–æ (1√ó/—Ä—ñ–∫)</option>
          </select>
          <div class="hint">–í–Ω–µ—Å–æ–∫ ‚Äî —â–æ–º—ñ—Å—è—á–Ω–∏–π –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º.</div>
        </div>
      </div>

      <div class="row" style="margin-top:8px">
        <div>
          <label>–†—ñ—á–Ω–∞ —Å—Ç–∞–≤–∫–∞, % (–¶—ñ–ª—ñ)</label>
          <input id="goalRate" type="number" min="0" step="0.01" value="8">
          <details class="muted-box" style="margin-top:6px">
            <summary style="cursor:pointer"><b>–ü—ñ–¥–∫–∞–∑–∫–∞ –ø–æ —Å—Ç–∞–≤—Ü—ñ (—Ä–∏–Ω–æ–∫)</b></summary>
            <div class="hint" style="margin-top:8px; line-height:1.6">
              ‚Ä¢ –î–µ–ø–æ–∑–∏—Ç–∏/–û–í–î–ü/Treasuries: ~3‚Äì6% —É $. ‚Ä¢ –Ü–Ω–≤–µ—Å—Ç-–≥—Ä–µ–π—Ç –æ–±–ª—ñ–≥–∞—Ü—ñ—ó: ~3‚Äì6% —É $.<br>
              ‚Ä¢ –®–∏—Ä–æ–∫–∏–π —ñ–Ω–¥–µ–∫—Å –∞–∫—Ü—ñ–π: ~6‚Äì10% —É $ (–¥–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–æ). ‚Ä¢ –ü–æ—Ä—Ç—Ñ–µ–ª—å 60/40: ~5‚Äì8% —É $.<br>
              –¶–µ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è; –º–æ–¥–µ–ª—é–π—Ç–µ –∫—ñ–ª—å–∫–∞ —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤.
            </div>
          </details>
        </div>
        <div>
          <label>–¢–µ—Ä–º—ñ–Ω (–¶—ñ–ª—ñ)</label>
          <div class="row" style="grid-template-columns:2fr 1fr">
            <input id="goalPeriodCount" type="number" min="1" step="1" value="5">
            <select id="goalPeriodUnit">
              <option value="years" selected>—Ä–æ–∫–∏</option>
              <option value="months">–º—ñ—Å—è—Ü—ñ</option>
            </select>
          </div>
          <label style="display:flex;gap:8px;align-items:center;margin-top:8px">
            <input id="goalAutoTerm" type="checkbox"> <span class="hint">–û–±—á–∏—Å–ª–∏—Ç–∏ —Ç–µ—Ä–º—ñ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ</span>
          </label>
        </div>
      </div>

      <!-- –í–ª–∞—Å–Ω–µ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–¥–∞—á—ñ -->
      <div class="row" style="margin-top:8px">
        <div>
          <label>–©–æ –ø–æ—Ä–∞—Ö—É–≤–∞—Ç–∏</label>
          <select id="goalMode">
            <option value="PMT" selected>–©–æ–º—ñ—Å—è—á–Ω–∏–π –≤–Ω–µ—Å–æ–∫ (–∑–∞ –≤—ñ–¥–æ–º–æ—ó —Å—Ç–∞—Ä—Ç–æ–≤–æ—ó —Å—É–º–∏)</option>
            <option value="TERM">–¢–µ—Ä–º—ñ–Ω (–∑–∞ –≤—ñ–¥–æ–º–∏—Ö P0 —ñ PMT)</option>
            <option value="P0">–ü–æ—á–∞—Ç–∫–æ–≤–∞ —Å—É–º–∞ (–∑–∞ –≤—ñ–¥–æ–º–æ–≥–æ —â–æ–º—ñ—Å—è—á–Ω–æ–≥–æ –≤–Ω–µ—Å–∫—É)</option>
          </select>
          <div class="goal-note">–ü—Ä–∞—Ü—é—î–º–æ –∑ –≤–∞—à–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ ¬´–¶—ñ–ª–µ–π¬ª, –Ω–µ –∑ –±–∞–∑–æ–≤–æ–≥–æ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞.</div>
        </div>
        <div>
          <label>–¶—ñ–ª—å–æ–≤–∞ —Å—É–º–∞</label>
          <input id="goalTarget" type="number" min="0" step="0.01" value="10000">
        </div>
      </div>

      <!-- –í—ñ–¥–æ–º—ñ –∑–Ω–∞—á–µ–Ω–Ω—è -->
      <div class="row" style="margin-top:8px">
        <div id="goalRowP0">
          <label>–í—ñ–¥–æ–º–∞ —Å—Ç–∞—Ä—Ç–æ–≤–∞ —Å—É–º–∞ (P0)</label>
          <input id="goalKnownP0" type="number" min="0" step="0.01" value="0">
        </div>
        <div id="goalRowPMT">
          <label>–í—ñ–¥–æ–º–∏–π —â–æ–º—ñ—Å—è—á–Ω–∏–π –≤–Ω–µ—Å–æ–∫ (PMT)</label>
          <input id="goalKnownPMT" type="number" min="0" step="0.01" value="100">
        </div>
      </div>

      <div class="row" style="margin-top:8px">
        <div>
          <label>–¢–æ—á–Ω—ñ—Å—Ç—å –ø—ñ–¥–±–æ—Ä—É</label>
          <select id="goalEps">
            <option value="0.01" selected>–¥–æ –∫–æ–ø—ñ–π–æ–∫</option>
            <option value="1">–¥–æ –≥—Ä–∏–≤–Ω—ñ/–¥–æ–ª–∞—Ä–∞/—î–≤—Ä–æ</option>
            <option value="10">¬±10 –≥—Ä–æ—à. –æ–¥.</option>
          </select>
        </div>
        <div class="hint" style="display:flex;align-items:end">–£ –≤–∞—Ä—ñ–∞—Ü—ñ—è—Ö –º–∏ —Ä–∞—Ö—É—î–º–æ –∑–º—ñ–Ω—É —Ç–µ—Ä–º—ñ–Ω—É –ø—Ä–∏ —Ä—ñ–∑–Ω–∏—Ö –≤–Ω–µ—Å–∫–∞—Ö.</div>
      </div>

      <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap">
        <button class="btn btn-primary" id="goalBtn">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏</button>
        <button class="btn btn-ghost" id="goalReset">–°–∫–∏–Ω—É—Ç–∏ ¬´–¶—ñ–ª—ñ¬ª</button>
      </div>

      <div id="goalOut" class="hero-info" style="margin-top:12px; display:none"></div>
      <div id="goalVariants" class="muted-box" style="margin-top:10px; display:none"></div>
    </section>

    <!-- ===== FAQ ===== -->
    <section class="card" style="margin:16px 0">
      <h2 style="margin:0 0 8px; font-size:20px">–ú—ñ–Ω—ñ-FAQ</h2>
      <details style="border:1px solid var(--line); border-radius:12px; padding:12px 14px; background:var(--panel)">
        <summary style="cursor:pointer; font-weight:700">–©–æ —Ç–∞–∫–µ —Å–∫–ª–∞–¥–Ω–∏–π –≤—ñ–¥—Å–æ—Ç–æ–∫?</summary>
        <div class="hint" style="margin-top:8px">–í—ñ–¥—Å–æ—Ç–∫–∏ –¥–æ–¥–∞—é—Ç—å—Å—è –¥–æ —Ç—ñ–ª–∞ —ñ–Ω–≤–µ—Å—Ç–∏—Ü—ñ—ó, —ñ –¥–∞–ª—ñ –Ω–∞—Ä–∞—Ö–æ–≤—É—é—Ç—å—Å—è –≤–∂–µ –Ω–∞ –±—ñ–ª—å—à—É —Å—É–º—É ‚Äî ¬´–≤—ñ–¥—Å–æ—Ç–∫–∏ –Ω–∞ –≤—ñ–¥—Å–æ—Ç–∫–∏¬ª.</div>
      </details>
      <details style="border:1px solid var(--line); border-radius:12px; padding:12px 14px; background:var(--panel); margin-top:10px">
        <summary style="cursor:pointer; font-weight:700">–ß–∏–º –∫–∞–ø—ñ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—è –≤—ñ–¥—Ä—ñ–∑–Ω—è—î—Ç—å—Å—è –≤—ñ–¥ –≤–Ω–µ—Å–∫—ñ–≤?</summary>
        <div class="hint" style="margin-top:8px">–í–Ω–µ—Å–∫–∏ ‚Äî –∑–∞–≤–∂–¥–∏ —â–æ–º—ñ—Å—è—á–Ω—ñ. –ö–∞–ø—ñ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—è –≤–∏–∑–Ω–∞—á–∞—î, –∫–æ–ª–∏ —Å–∞–º–µ –Ω–∞—Ä–∞—Ö–æ–≤—É—é—Ç—å—Å—è % (1/2/4/12 —Ä–∞–∑—ñ–≤ –Ω–∞ —Ä—ñ–∫). –ß–∞—Å—Ç—ñ—à–∞ –∫–∞–ø—ñ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—è = —à–≤–∏–¥—à–µ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è.</div>
      </details>
    </section>
  </main>

  <footer class="wrap" style="text-align:center; font-size:12px; color:var(--muted); padding:20px 0">
    ¬© Active Invest School. –û—Å–≤—ñ—Ç–Ω—ñ–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (–Ω–µ —ñ–Ω–≤–µ—Å—Ç—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è).
  </footer>

<script>
/* ========= –£–¢–ò–õ–Ü–¢–ò ========= */
const fmtMoney = (x, cur='UAH') => new Intl.NumberFormat('uk-UA',{style:'currency',currency:cur,maximumFractionDigits:2}).format(x);
const monthsTotal = (unit, count) => unit==='months' ? count : count*12;
const ymLabel = (months) => { const y=Math.floor(months/12), m=months%12; return `${months} –º—ñ—Å. (${y} —Ä. ${m} –º—ñ—Å.)`; };

/* ========= –ú–û–î–ï–õ–¨ –°–ö–õ–ê–î–ù–û–ì–û % =========
   –©–æ–º—ñ—Å—è—á–Ω–∏–π –≤–Ω–µ—Å–æ–∫ PMT; % –∫–∞–ø—ñ—Ç–∞–ª—ñ–∑—É—é—Ç—å—Å—è m —Ä–∞–∑—ñ–≤/—Ä—ñ–∫ (–∫–æ–∂–Ω—ñ 12/m –º—ñ—Å) –∑–∞ —Å—Ç–∞–≤–∫–æ—é r/m.
*/
function simulate({P0, PMT, annualRate, m, months, previewRows=12}){
  const intervalMonths = Math.round(12 / m);
  const iPeriod = annualRate / m;
  let balance = P0;
  const rows=[], series=[balance];

  for(let t=1;t<=months;t++){
    const begin=balance;
    balance += PMT;
    let interestAdded=0;
    if(t % intervalMonths === 0){ const interest=balance*iPeriod; balance+=interest; interestAdded=interest; }
    if(t<=previewRows){ rows.push({month:t,begin,pmt:PMT,interest:interestAdded,end:balance}); }
    series.push(balance);
  }
  return {final:balance, rows, series};
}

/* –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –º—ñ—Å—è—Ü—å, —â–æ–± –¥–æ—Å—è–≥—Ç–∏ target; —è–∫—â–æ >maxMonths ‚Äî null */
function monthsToTarget({P0, PMT, annualRate, m, target, maxMonths=1200}){
  if(P0>=target) return 0;
  let lo=0, hi=12;
  while(hi<=maxMonths && simulate({P0,PMT,annualRate,m,months:hi}).final < target) hi*=2;
  hi=Math.min(hi,maxMonths);
  if(simulate({P0,PMT,annualRate,m,months:hi}).final < target) return null;
  while(lo<hi){
    const mid=Math.floor((lo+hi)/2);
    const f=simulate({P0,PMT,annualRate,m,months:mid}).final;
    if(f>=target) hi=mid; else lo=mid+1;
  }
  return lo;
}

/* ========= –ë–ê–ó–û–í–ò–ô –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† (–ù–ï –ó–ê–õ–ï–ñ–ò–¢–¨ –í–Ü–î ¬´–¶–Ü–õ–ï–ô¬ª) ========= */
let unitCurrent='years';
document.querySelectorAll('.unit-tab').forEach(btn=>{
  btn.addEventListener('click',()=>{ unitCurrent=btn.dataset.unit; document.getElementById('periodUnit').value=unitCurrent;
    document.querySelectorAll('.unit-tab').forEach(b=>b.setAttribute('aria-pressed', b===btn?'true':'false')); });
});
const getUnit = ()=> window.matchMedia('(min-width:560px)').matches ? unitCurrent : document.getElementById('periodUnit').value;

function drawChart(series, currency){
  const canvas=document.getElementById('chart'), tip=document.getElementById('chartTip'), ctx=canvas.getContext('2d');
  const dpr=window.devicePixelRatio||1; canvas.width=canvas.clientWidth*dpr; canvas.height=canvas.clientHeight*dpr; ctx.setTransform(dpr,0,0,dpr,0,0);
  const w=canvas.clientWidth,h=canvas.clientHeight, padL=48,padR=16,padT=12,padB=32, plotW=w-padL-padR,plotH=h-padT-padB;
  const len=Math.max(series.length,2), min=Math.min(...series), max=Math.max(...series), yMin=Math.max(0,Math.floor(min)), yMax=Math.ceil(max);
  const X=i=>padL+plotW*(i/(len-1)), Y=v=>padT+plotH*(1-(v-yMin)/(yMax-yMin||1));
  ctx.clearRect(0,0,w,h);
  ctx.strokeStyle=getComputedStyle(document.body).getPropertyValue('--line'); ctx.lineWidth=1; ctx.beginPath();
  for(let k=0;k<=4;k++){ const y=padT+plotH*(k/4); ctx.moveTo(padL,y); ctx.lineTo(w-padR,y);} ctx.stroke();
  ctx.fillStyle=getComputedStyle(document.body).getPropertyValue('--ink'); ctx.font='12px Inter, system-ui, sans-serif'; ctx.textAlign='right'; ctx.textBaseline='middle';
  for(let k=0;k<=4;k++){ const v=yMax-(yMax-yMin)*(k/4), y=padT+plotH*(k/4); ctx.fillText(shortNum(v), padL-6, y); }
  ctx.textAlign='center'; ctx.textBaseline='top';
  const monthsTotal=len-1, years=Math.max(1,Math.round(monthsTotal/12));
  for(let y=0;y<=years;y++){ const i=Math.min(monthsTotal,y*12), x=X(i); ctx.fillText((y)+'—Ä', x, h-padB+8); }
  const lineColor=getComputedStyle(document.documentElement).getPropertyValue('--brand-1').trim()||'#0b8a4b';
  const grad=ctx.createLinearGradient(0,padT,0,h-padB); grad.addColorStop(0,hexToRgba(lineColor,.35)); grad.addColorStop(1,hexToRgba(lineColor,0));
  ctx.beginPath(); ctx.moveTo(X(0),Y(series[0])); for(let i=1;i<len;i++) ctx.lineTo(X(i),Y(series[i])); ctx.lineTo(X(len-1),h-padB); ctx.lineTo(X(0),h-padB); ctx.closePath(); ctx.fillStyle=grad; ctx.fill();
  ctx.strokeStyle=lineColor; ctx.lineWidth=2; ctx.beginPath(); ctx.moveTo(X(0),Y(series[0])); for(let i=1;i<len;i++) ctx.lineTo(X(i),Y(series[i])); ctx.stroke();
  const base=ctx.getImageData(0,0,canvas.width/dpr,canvas.height/dpr);
  canvas.onmousemove=(e)=>{ const r=canvas.getBoundingClientRect(), x=(e.clientX-r.left); const i=Math.max(0,Math.min(len-1,Math.round((x-padL)/(plotW/(len-1))))); const cx=X(i), cy=Y(series[i]);
    ctx.putImageData(base,0,0); ctx.strokeStyle='#ffffff33'; ctx.lineWidth=1; ctx.beginPath(); ctx.moveTo(cx,padT); ctx.lineTo(cx,h-padB); ctx.stroke();
    ctx.fillStyle=lineColor; ctx.beginPath(); ctx.arc(cx,cy,3,0,Math.PI*2); ctx.fill();
    tip.hidden=false; tip.textContent=`${fmtMoney(series[i], document.getElementById('currency').value)} ‚Ä¢ ${i} –º—ñ—Å.`; tip.style.left=`${cx}px`; tip.style.top=`${cy}px`; };
  canvas.onmouseleave=()=>{ tip.hidden=true; ctx.putImageData(base,0,0); };
  function shortNum(v){ if(v>=1e9)return(v/1e9).toFixed(1)+'B'; if(v>=1e6)return(v/1e6).toFixed(1)+'M'; if(v>=1e3)return(v/1e3).toFixed(0)+'k'; return Math.round(v).toString(); }
  function hexToRgba(hex,a){ const h=hex.replace('#',''); const bigint=parseInt(h.length===3?h.replace(/(.)/g,'$1$1'):h,16); const r=(bigint>>16)&255,g=(bigint>>8)&255,b=bigint&255; return `rgba(${r},${g},${b},${a})`; }
}

function calc(){
  const currency=document.getElementById('currency').value;
  const P0=+document.getElementById('p0').value||0;
  const PMT=+document.getElementById('pmt').value||0;
  const r=(+document.getElementById('rate').value||0)/100;
  const m=+document.getElementById('m').value;
  const unit=getUnit();
  const count=+document.getElementById('periodCount').value;
  const months=monthsTotal(unit,count);

  const {final, rows, series}=simulate({P0,PMT,annualRate:r,m,months});
  const horizonLabel= unit==='years'?`${count} —Ä–æ–∫—ñ–≤`:`${count} –º—ñ—Å—è—Ü—ñ–≤`;
  document.getElementById('resHorizon').textContent=horizonLabel;
  document.getElementById('resAmount').textContent=fmtMoney(final,currency);
  const tb=document.querySelector('#preview tbody');
  tb.innerHTML=rows.map(rw=>`<tr><td>${rw.month}</td><td>${fmtMoney(rw.begin,currency)}</td><td>${fmtMoney(rw.pmt,currency)}</td><td>${fmtMoney(rw.interest,currency)}</td><td>${fmtMoney(rw.end,currency)}</td></tr>`).join('');
  drawChart(series,currency);
}
function resetForm(){
  document.getElementById('currency').value='USD'; document.getElementById('m').value='12';
  document.getElementById('p0').value='0'; document.getElementById('pmt').value='100'; document.getElementById('rate').value='8';
  document.getElementById('periodCount').value='5'; document.getElementById('periodUnit').value='years'; unitCurrent='years';
  document.querySelectorAll('.unit-tab').forEach(b=>b.setAttribute('aria-pressed', b.dataset.unit==='years'?'true':'false'));
  document.querySelector('#preview tbody').innerHTML=''; document.getElementById('resHorizon').textContent='‚Äî'; document.getElementById('resAmount').textContent='‚Äî';
  drawChart([0,0,0], document.getElementById('currency').value);
}
document.getElementById('calcBtn').addEventListener('click',calc);
document.getElementById('resetBtn').addEventListener('click',resetForm);

/* ========= üéØ –¶–Ü–õ–Ü ‚Äî –ù–ï–ó–ê–õ–ï–ñ–ù–ò–ô –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† ========= */
function updateGoalKnownVisibility(){
  const mode=document.getElementById('goalMode').value;
  document.getElementById('goalRowP0').style.display = (mode==='PMT'||mode==='TERM')?'block':'none';
  document.getElementById('goalRowPMT').style.display= (mode==='P0'||mode==='TERM')?'block':'none';
}
document.getElementById('goalMode').addEventListener('change', updateGoalKnownVisibility);
updateGoalKnownVisibility();

function goalReset(){
  document.getElementById('goalCurrency').value='USD';
  document.getElementById('goalM').value='12';
  document.getElementById('goalRate').value='8';
  document.getElementById('goalPeriodCount').value='5';
  document.getElementById('goalPeriodUnit').value='years';
  document.getElementById('goalAutoTerm').checked=false;
  document.getElementById('goalMode').value='PMT';
  document.getElementById('goalTarget').value='10000';
  document.getElementById('goalKnownP0').value='0';
  document.getElementById('goalKnownPMT').value='100';
  document.getElementById('goalEps').value='0.01';
  updateGoalKnownVisibility();
  document.getElementById('goalOut').style.display='none';
  document.getElementById('goalVariants').style.display='none';
}
document.getElementById('goalReset').addEventListener('click', goalReset);

function goalSeek(){
  const cur=document.getElementById('goalCurrency').value;
  const m=+document.getElementById('goalM').value;
  const r=(+document.getElementById('goalRate').value||0)/100;
  const count=+document.getElementById('goalPeriodCount').value;
  const unit=document.getElementById('goalPeriodUnit').value;
  const autoTerm=document.getElementById('goalAutoTerm').checked;
  const mode=document.getElementById('goalMode').value;
  const target=+document.getElementById('goalTarget').value||0;
  const P0=+document.getElementById('goalKnownP0').value||0;
  const PMTknown=+document.getElementById('goalKnownPMT').value||0;
  const eps=+document.getElementById('goalEps').value||0.01;

  const monthsFix = monthsTotal(unit, count);
  const monthsOrAuto = (autoTerm? null : monthsFix);

  if(target<=0){ return showGoal('goalOut','–í–∫–∞–∂—ñ—Ç—å –¥–æ–¥–∞—Ç–Ω—É —Ü—ñ–ª—å–æ–≤—É —Å—É–º—É.', true); }

  function fFinal(P0,PMT,months){ return simulate({P0,PMT,annualRate:r,m,months}).final; }
  function bracket(fn, lo=0){ let hi=1; while(fn(hi)<target && hi<1e12) hi*=2; return [lo,hi]; }

  let html='', variantsHTML='', minMonths=null;

  if(mode==='PMT'){
    // 1) –ø—ñ–¥–±—ñ—Ä PMT –ø—ñ–¥ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π —Ç–µ—Ä–º—ñ–Ω, –∞–±–æ –ø—ñ–¥–±—ñ—Ä PMT + –º—ñ–Ω. —Ç–µ—Ä–º—ñ–Ω —è–∫—â–æ autoTerm
    let PMTreq=0;
    if(monthsOrAuto){ // —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π —Ç–µ—Ä–º—ñ–Ω
      const months=monthsOrAuto;
      const val=(PMT)=>fFinal(P0,PMT,months);
      if(val(0)>=target){ PMTreq=0; }
      else { let [lo,hi]=bracket(val,0); for(let it=0;it<200;it++){ const mid=(lo+hi)/2, f=val(mid); if(Math.abs(f-target)<=eps){PMTreq=mid;break;} (f<target)?(lo=mid):(hi=mid); PMTreq=mid; } }
      html = `–ü–æ—Ç—Ä—ñ–±–Ω–∏–π <b>—â–æ–º—ñ—Å—è—á–Ω–∏–π –≤–Ω–µ—Å–æ–∫</b> –¥–ª—è ${unit==='years'?`${count} —Ä–æ–∫—ñ–≤`:`${count} –º—ñ—Å—è—Ü—ñ–≤`}: <span class="mono">${fmtMoney(PMTreq,cur)}</span>`;
      // –º—ñ–Ω. —Ç–µ—Ä–º—ñ–Ω –ø—Ä–∏ —Ü—å–æ–º—É –≤–Ω–µ—Å–∫—É (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è)
      const minM = monthsToTarget({P0, PMT:PMTreq, annualRate:r, m, target});
      html += `<br>–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π <b>—Ç–µ—Ä–º—ñ–Ω</b> –ø—Ä–∏ —Ü—å–æ–º—É –≤–Ω–µ—Å–∫—É: <b>${minM===null?'–Ω–µ–¥–æ—Å—è–∂–Ω–æ':ymLabel(minM)}</b>`;
    } else {
      // –ø—ñ–¥–±–∏—Ä–∞—î–º–æ PMT —ñ –æ–¥—Ä–∞–∑—É –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ç–µ—Ä–º—ñ–Ω –¥–ª—è –Ω—å–æ–≥–æ (—â–æ–± –¥–æ—Å—è–≥–Ω—É—Ç–∏ —Ä—ñ–≤–Ω–æ target)
      // —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è: —Å–ø–µ—Ä—à—É –ø—ñ–¥–±–µ—Ä–µ–º–æ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ç–µ—Ä–º—ñ–Ω –¥–ª—è –¥–µ–∫—ñ–ª—å–∫–æ—Ö PMT —ñ –∑–Ω–∞–π–¥–µ–º–æ PMT —ñ–∑ –Ω–∞–π–∫–æ—Ä–æ—Ç—à–∏–º —Ç–µ—Ä–º—ñ–Ω–æ–º ‚âà –Ω–∞–π–º–µ–Ω—à–µ PMT? –ù—ñ: —é–∑–µ—Ä –ø—Ä–æ—Å–∏–≤ ¬´—Å–∫—ñ–ª—å–∫–∏ —Ç—Ä–µ–±–∞ –≤–Ω–æ—Å–∏—Ç–∏ —â–æ–º—ñ—Å—è—á–Ω–æ¬ª + ¬´—Å–∫—ñ–ª—å–∫–∏ —á–∞—Å—É –ø–æ—Ç—Ä—ñ–±–Ω–æ¬ª.
      // –†–æ–±–∏–º–æ —Ç–∞–∫: –ø—ñ–¥–±–µ—Ä–µ–º–æ PMT –¥–ª—è "–æ—Ä—ñ—î–Ω—Ç–æ–≤–Ω–æ–≥–æ" —Ç–µ—Ä–º—ñ–Ω—É (–ø–æ—á–Ω–µ–º–æ –∑ 12 –º—ñ—Å), –ø–æ—Ç—ñ–º –ø–æ—Ä–∞—Ö—É—î–º–æ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ç–µ—Ä–º—ñ–Ω –ø—Ä–∏ —Ü—å–æ–º—É PMT.
      const monthsGuess=12;
      const val=(PMT)=>fFinal(P0,PMT,monthsGuess);
      if(val(0)>=target){ PMTreq=0; }
      else { let [lo,hi]=bracket(val,0); for(let it=0;it<200;it++){ const mid=(lo+hi)/2, f=val(mid); if(Math.abs(f-target)<=eps){PMTreq=mid;break;} (f<target)?(lo=mid):(hi=mid); PMTreq=mid; } }
      minMonths = monthsToTarget({P0, PMT:PMTreq, annualRate:r, m, target});
      html = `–ü–æ—Ç—Ä—ñ–±–Ω–∏–π <b>—â–æ–º—ñ—Å—è—á–Ω–∏–π –≤–Ω–µ—Å–æ–∫</b>: <span class="mono">${fmtMoney(PMTreq,cur)}</span><br>
              –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π <b>—Ç–µ—Ä–º—ñ–Ω</b> –ø—Ä–∏ —Ü—å–æ–º—É –≤–Ω–µ—Å–∫—É: <b>${minMonths===null?'–Ω–µ–¥–æ—Å—è–∂–Ω–æ':ymLabel(minMonths)}</b>`;
    }

    // 2) –≤–∞—Ä—ñ–∞—Ü—ñ—ó –∑–∞ –≤–Ω–µ—Å–∫–æ–º ‚Üí —Ç–µ—Ä–º—ñ–Ω
    const basePMT = PMTreq;
    const variants=[{label:'‚àí20%',k:0.8},{label:'–±–∞–∑–æ–≤–∏–π',k:1.0},{label:'+20%',k:1.2},{label:'+50%',k:1.5},{label:'√ó2',k:2.0}];
    const rows=variants.map(v=>{
      const mths=monthsToTarget({P0, PMT:basePMT*v.k, annualRate:r, m, target});
      return `<tr><td>${v.label}</td><td class="mono">${fmtMoney(basePMT*v.k,cur)}</td><td>${mths===null?'‚Äî':ymLabel(mths)}</td></tr>`;
    }).join('');
    variantsHTML = tableBox('–í–∞—Ä—ñ–∞—Ü—ñ—ó –∑–∞ –≤–Ω–µ—Å–∫–æ–º (–µ—Ñ–µ–∫—Ç —Å–∫–ª–∞–¥–Ω–æ–≥–æ %)', rows, ['–°—Ü–µ–Ω–∞—Ä—ñ–π','–í–Ω–µ—Å–æ–∫/–º—ñ—Å','–ú—ñ–Ω. —Ç–µ—Ä–º—ñ–Ω –¥–æ —Ü—ñ–ª—ñ']);

  } else if(mode==='TERM'){
    // –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ç–µ—Ä–º—ñ–Ω –ø—Ä–∏ –≤—ñ–¥–æ–º–∏—Ö P0 —Ç–∞ PMT
    minMonths = monthsToTarget({P0, PMT:PMTknown, annualRate:r, m, target});
    html = minMonths===null
      ? `–ó —Ü–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Ü—ñ–ª—å <b>–Ω–µ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω–æ</b> —É –º–µ–∂–∞—Ö 100 —Ä–æ–∫—ñ–≤.`
      : `–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π <b>—Ç–µ—Ä–º—ñ–Ω</b>: <span class="mono">${ymLabel(minMonths)}</span>`;

    // –≤–∞—Ä—ñ–∞—Ü—ñ—ó PMT ‚Üí —Ç–µ—Ä–º—ñ–Ω
    const variants=[{label:'‚àí20%',k:0.8},{label:'–±–∞–∑–æ–≤–∏–π',k:1.0},{label:'+20%',k:1.2},{label:'+50%',k:1.5},{label:'√ó2',k:2.0}];
    const rows=variants.map(v=>{
      const mths=monthsToTarget({P0, PMT:PMTknown*v.k, annualRate:r, m, target});
      return `<tr><td>${v.label}</td><td class="mono">${fmtMoney(PMTknown*v.k,cur)}</td><td>${mths===null?'‚Äî':ymLabel(mths)}</td></tr>`;
    }).join('');
    variantsHTML = tableBox('–Ø–∫ –∑–º—ñ–Ω–∏—Ç—å—Å—è —Ç–µ—Ä–º—ñ–Ω –ø—Ä–∏ —ñ–Ω—à–æ–º—É –≤–Ω–µ—Å–∫—É', rows, ['–°—Ü–µ–Ω–∞—Ä—ñ–π','–í–Ω–µ—Å–æ–∫/–º—ñ—Å','–ú—ñ–Ω. —Ç–µ—Ä–º—ñ–Ω']);

  } else { // P0
    if(monthsOrAuto){
      const months=monthsOrAuto;
      const val=(P0x)=>fFinal(P0x,PMTknown,months);
      let P0req=0;
      if(val(0)>=target){ P0req=0; }
      else { let [lo,hi]=bracket(val,0); for(let it=0;it<200;it++){ const mid=(lo+hi)/2, f=val(mid); if(Math.abs(f-target)<=eps){P0req=mid;break;} (f<target)?(lo=mid):(hi=mid); P0req=mid; } }
      html = `–ü–æ—Ç—Ä—ñ–±–Ω–∞ <b>–ø–æ—á–∞—Ç–∫–æ–≤–∞ —Å—É–º–∞</b> –¥–ª—è ${unit==='years'?`${count} —Ä–æ–∫—ñ–≤`:`${count} –º—ñ—Å—è—Ü—ñ–≤`}: <span class="mono">${fmtMoney(P0req,cur)}</span>`;

      // –≤–∞—Ä—ñ–∞—Ü—ñ—ó PMT ‚Üí —è–∫ –∑–º—ñ–Ω–∏—Ç—å—Å—è –ø–æ—Ç—Ä—ñ–±–Ω–∞ —Å—Ç–∞—Ä—Ç–æ–≤–∞ —Å—É–º–∞
      const variants=[{label:'‚àí20%',k:0.8},{label:'–±–∞–∑–æ–≤–∏–π',k:1.0},{label:'+20%',k:1.2},{label:'+50%',k:1.5},{label:'√ó2',k:2.0}];
      const rows=variants.map(v=>{
        const val2=(P0x)=>fFinal(P0x,PMTknown*v.k,months);
        let need=0;
        if(val2(0)>=target){ need=0; }
        else { let [lo,hi]=bracket(val2,0); for(let it=0;it<200;it++){ const mid=(lo+hi)/2, f=val2(mid); if(Math.abs(f-target)<=eps){need=mid;break;} (f<target)?(lo=mid):(hi=mid); need=mid; } }
        return `<tr><td>${v.label}</td><td class="mono">${fmtMoney(PMTknown*v.k,cur)}</td><td class="mono">${fmtMoney(need,cur)}</td></tr>`;
      }).join('');
      variantsHTML = tableBox('–Ø–∫ –∑–º—ñ–Ω–∏—Ç—å—Å—è –ø–æ—Ç—Ä—ñ–±–Ω–∞ —Å—Ç–∞—Ä—Ç–æ–≤–∞ —Å—É–º–∞ –ø—Ä–∏ —ñ–Ω—à–æ–º—É –≤–Ω–µ—Å–∫—É', rows, ['–°—Ü–µ–Ω–∞—Ä—ñ–π','–í–Ω–µ—Å–æ–∫/–º—ñ—Å','–ü–æ—Ç—Ä—ñ–±–Ω–∞ —Å—Ç–∞—Ä—Ç–æ–≤–∞ —Å—É–º–∞']);
    } else {
      // auto term: –æ–±—á–∏—Å–ª–∏—Ç–∏ –º—ñ–Ω. —Ç–µ—Ä–º—ñ–Ω –¥–ª—è –¥–∞–Ω–∏—Ö P0, PMTknown; –∞ –ø–æ—Ç—ñ–º –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ –ø–æ–∫–∞–∑–∞—Ç–∏, —è–∫—É P0 —Ç—Ä–µ–±–∞ –ø—Ä–∏ –Ω—É–ª—å–æ–≤–æ–º—É —Ç–µ—Ä–º—ñ–Ω—ñ (–Ω–µ –º–∞—î —Å–µ–Ω—Å—É) ‚Äî –∫—Ä–∞—â–µ –ø–æ–∫–∞–∑–∞—Ç–∏ ¬´—Ç–µ—Ä–º—ñ–Ω¬ª —ñ –≤–∞—Ä—ñ–∞—Ü—ñ—ó PMT.
      minMonths = monthsToTarget({P0, PMT:PMTknown, annualRate:r, m, target});
      html = minMonths===null
        ? `–ó —Ü–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —Ü—ñ–ª—å <b>–Ω–µ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω–æ</b> —É –º–µ–∂–∞—Ö 100 —Ä–æ–∫—ñ–≤.`
        : `–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π <b>—Ç–µ—Ä–º—ñ–Ω</b> –∑ –≤–∞—à–æ—é —Å—Ç–∞—Ä—Ç–æ–≤–æ—é —Å—É–º–æ—é —Ç–∞ –≤–Ω–µ—Å–∫–æ–º: <span class="mono">${ymLabel(minMonths)}</span>`;

      const variants=[{label:'‚àí20%',k:0.8},{label:'–±–∞–∑–æ–≤–∏–π',k:1.0},{label:'+20%',k:1.2},{label:'+50%',k:1.5},{label:'√ó2',k:2.0}];
      const rows=variants.map(v=>{
        const mths=monthsToTarget({P0, PMT:PMTknown*v.k, annualRate:r, m, target});
        return `<tr><td>${v.label}</td><td class="mono">${fmtMoney(PMTknown*v.k,cur)}</td><td>${mths===null?'‚Äî':ymLabel(mths)}</td></tr>`;
      }).join('');
      variantsHTML = tableBox('–Ø–∫ –∑–º—ñ–Ω–∏—Ç—å—Å—è —Ç–µ—Ä–º—ñ–Ω –ø—Ä–∏ —ñ–Ω—à–æ–º—É –≤–Ω–µ—Å–∫—É', rows, ['–°—Ü–µ–Ω–∞—Ä—ñ–π','–í–Ω–µ—Å–æ–∫/–º—ñ—Å','–ú—ñ–Ω. —Ç–µ—Ä–º—ñ–Ω']);
    }
  }

  showGoal('goalOut', html, false);
  const box=document.getElementById('goalVariants');
  if(variantsHTML){ box.style.display='block'; box.innerHTML=variantsHTML; } else { box.style.display='none'; box.innerHTML=''; }
}
document.getElementById('goalBtn').addEventListener('click', goalSeek);

function tableBox(title, rowsHTML, headers){
  return `<div style="margin-top:10px">
    <b>${title}</b>
    <div class="table-wrap" style="max-height:none; margin-top:6px">
      <table style="font-size:13px">
        <thead><tr>${headers.map(h=>`<th style="text-align:left">${h}</th>`).join('')}</tr></thead>
        <tbody>${rowsHTML}</tbody>
      </table>
    </div>
  </div>`;
}

function showGoal(id, html, warn){
  const box=document.getElementById(id);
  box.style.display='block';
  box.style.borderColor = warn ? 'var(--warn)' : 'var(--line)';
  box.innerHTML=html;
}

/* —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –≥—Ä–∞—Ñ—ñ–∫–∞ (–ø–æ—Ä–æ–∂–Ω—ñ–π –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ) */
window.addEventListener('load', ()=> drawChart([0,0,0], document.getElementById('currency').value));
</script>
</body>
</html>
