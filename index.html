<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Active Invest School ‚Äî –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–∫–ª–∞–¥–Ω–æ–≥–æ –≤—ñ–¥—Å–æ—Ç–∫–∞</title>
  <meta name="color-scheme" content="light dark">
  <link rel="icon" href="data:,">
  <style>
    :root{
      --prime:#0E7F45; --prime-dk:#053607; --prime-2:#295D4B;
      --accent:#C78A00; --accent-2:#D6A100;
      --pad-1:#F9F3CD; --pad-2:#F0D8B9; --pad-3:#F2F4C8;

      --bg:#0b1220; --panel:#0f172a; --muted:#111827;
      --text:#e5e7eb; --text-2:#94a3b8; --line:#1f2937; --ok:#16a34a;
    }
    @media (prefers-color-scheme: light){
      :root{ --bg:#fff; --panel:#f8fafc; --muted:#f1f5f9; --text:#0f172a; --text-2:#475569; --line:#e2e8f0; }
    }
    *{ box-sizing:border-box }
    body{ margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:var(--text) }
    .wrap{ max-width:1200px; margin:0 auto; padding:20px 16px }
    .grid{ display:grid; grid-template-columns:1fr 1fr; gap:16px }
    @media (max-width: 900px){ .grid{ grid-template-columns:1fr } }
    .card{ background:var(--panel); border:1px solid var(--line); border-radius:16px; padding:16px }
    h1{ font-size:24px; margin:0 0 8px }
    h2{ font-size:18px; margin:0 0 8px }
    .lead{ color:var(--text-2); line-height:1.6 }
    .head{ background:linear-gradient(135deg, var(--prime) 0%, var(--prime-2) 100%); border-radius:16px; padding:18px; color:#fff; margin-bottom:16px }
    .row{ display:grid; grid-template-columns:1fr 1fr; gap:12px }
    .row3{ display:grid; grid-template-columns:1fr 1fr 1fr; gap:12px }
    @media (max-width: 700px){ .row, .row3{ grid-template-columns:1fr } }
    label{ font-size:13px; color:var(--text-2); display:block; margin:0 0 6px }
    input, select{
      width:100%; padding:12px 12px;
      border-radius:12px; border:1px solid var(--line);
      background:#0e1627; color:#e7eefc;
    }
    @media (prefers-color-scheme: light){ input, select{ background:#fff; color:#111 } }
    .inline{ display:flex; gap:8px; align-items:center; flex-wrap:wrap }
    .btn{ padding:12px 16px; border-radius:12px; cursor:pointer; border:1px solid var(--line); background:var(--accent); color:#1b1200; font-weight:600 }
    .btn.muted{ background:var(--muted); color:var(--text) }
    .summary{ font-weight:700; font-size:20px }
    .badge{ font-size:12px; padding:4px 8px; border-radius:999px; border:1px dashed var(--line); display:inline-block }
    table{ width:100%; border-collapse:collapse; font-size:13px }
    th, td{ padding:8px 10px; border-bottom:1px solid var(--line); text-align:right; white-space:nowrap }
    th:first-child, td:first-child{ text-align:left }
    .muted-box{ background:var(--muted); border:1px solid var(--line); border-radius:12px; padding:10px }
    .hint{ background:#2a3413; border:1px dashed #5b5; padding:10px; border-radius:10px }
    @media (prefers-color-scheme: light){ .hint{ background:#fffbe6; border-color:#d4b200; color:#2b2b00 } }
    .pill-tabs{ display:flex; gap:8px; flex-wrap:wrap }
    .pill-tabs button{
      padding:8px 12px; border-radius:999px; border:1px solid var(--line); background:var(--muted); color:var(--text)
    }
    .pill-tabs button.active{ background:var(--accent); color:#1b1200; font-weight:700 }
    .term-wrap{ display:grid; grid-template-columns:1fr auto; gap:8px; align-items:center }
    .term-num{ min-width:100px }
    canvas{ width:100%; height:320px }
    a.btn-link{ display:inline-flex; align-items:center; gap:8px; text-decoration:none }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  <div class="wrap">

    <div class="head">
      <h1>Active Invest School ‚Äî –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å–∫–ª–∞–¥–Ω–æ–≥–æ –≤—ñ–¥—Å–æ—Ç–∫–∞</h1>
      <div class="lead">
        –©–æ–º—ñ—Å—è—á–Ω—ñ –≤–Ω–µ—Å–∫–∏ + —á–∞—Å—Ç–æ—Ç–∞ –∫–∞–ø—ñ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—ó (–ú—ñ—Å—è—á–Ω–æ / –ö–≤–∞—Ä—Ç–∞–ª—å–Ω–æ / –ü—ñ–≤—Ä—ñ—á–Ω–æ / –†—ñ—á–Ω–æ).<br>
        <b>–ü–æ—Ä–∞–¥–∞:</b> –∑–º—ñ–Ω—é–π—Ç–µ —Å—Ç–∞–≤–∫—É –π —á–∞—Å—Ç–æ—Ç—É –∫–∞–ø—ñ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—ó ‚Äî –ø–æ–±–∞—á–∏—Ç–µ, —è–∫ –∑–º—ñ–Ω—é—î—Ç—å—Å—è —à–≤–∏–¥–∫—ñ—Å—Ç—å —Ä–æ—Å—Ç—É.
      </div>
    </div>

    <div class="card muted-box" style="margin-bottom:16px">
      <b>–Ø–∫ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏:</b><br>
      <span class="lead">
        <b>–ë–∞–∑–æ–≤–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</b>: –≤–≤–µ–¥–∏ <b>P0</b> (–ø–æ—á–∞—Ç–∫–æ–≤–∏–π –∫–∞–ø—ñ—Ç–∞–ª), <b>PMT</b> (—â–æ–º—ñ—Å—è—á–Ω–∏–π –≤–Ω–µ—Å–æ–∫),
        —Ä—ñ—á–Ω—É —Å—Ç–∞–≤–∫—É, —á–∞—Å—Ç–æ—Ç—É –∫–∞–ø—ñ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ç–∞ —Ç–µ—Ä–º—ñ–Ω ‚Äî –æ—Ç—Ä–∏–º–∞—î—à –ø—ñ–¥—Å—É–º–æ–∫, –≥—Ä–∞—Ñ—ñ–∫ —ñ —Ç–∞–±–ª–∏—Ü—é.<br>
        <b>üéØ –¶—ñ–ª—ñ</b>: –æ–∫—Ä–µ–º–∏–π –±–ª–æ–∫. –í–∫–∞–∂–∏ —Ü—ñ–ª—å, —Å—Ç–∞–≤–∫—É —Ç–∞ –∫–∞–ø—ñ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—é —ñ –æ–±–µ—Ä–∏ —â–æ —Ä–∞—Ö—É–≤–∞—Ç–∏:
        <u>–≤–Ω–µ—Å–æ–∫, —Ç–µ—Ä–º—ñ–Ω –∞–±–æ –ø–æ—á–∞—Ç–∫–æ–≤—É —Å—É–º—É</u>. –Ñ –≤–∞—Ä—ñ–∞—Ü—ñ—ó –∑–∞ –≤–Ω–µ—Å–∫–æ–º —Ç–∞ —Å—Ü–µ–Ω–∞—Ä—ñ—ó 8% / 10% / 12%.
      </span>
      <div class="lead" style="margin-top:8px"><b>P0</b> ‚Äî —Å—Ç–∞—Ä—Ç–æ–≤–∞ —Å—É–º–∞. <b>PMT</b> ‚Äî —Å—É–º–∞, —è–∫—É –¥–æ–¥–∞—î—à —â–æ–º—ñ—Å—è—Ü—è.</div>
    </div>

    <div class="grid">
      <!-- –í–≤—ñ–¥ -->
      <div class="card">
        <h2>–í–≤—ñ–¥–Ω—ñ –¥–∞–Ω—ñ</h2>
        <div class="row">
          <div>
            <label>–í–∞–ª—é—Ç–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è</label>
            <select id="currency">
              <option value="USD" selected>$ USD</option>
              <option value="EUR">‚Ç¨ EUR</option>
              <option value="UAH">‚Ç¥ UAH</option>
            </select>
          </div>
          <div>
            <label>–ß–∞—Å—Ç–æ—Ç–∞ –∫–∞–ø—ñ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—ó</label>
            <select id="capFreq">
              <option value="12" selected>–ú—ñ—Å—è—á–Ω–æ (12√ó/—Ä—ñ–∫)</option>
              <option value="4">–ö–≤–∞—Ä—Ç–∞–ª—å–Ω–æ (4√ó/—Ä—ñ–∫)</option>
              <option value="2">–ü—ñ–≤—Ä—ñ—á–Ω–æ (2√ó/—Ä—ñ–∫)</option>
              <option value="1">–†—ñ—á–Ω–æ (1√ó/—Ä—ñ–∫)</option>
            </select>
            <div class="lead" style="margin-top:6px; font-size:12px">–í–Ω–µ—Å–æ–∫ –∑–∞–≤–∂–¥–∏ —â–æ–º—ñ—Å—è—á–Ω–∏–π; –∫–∞–ø—ñ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—è ‚Äî –∫–æ–ª–∏ –¥–æ–¥–∞—é—Ç—å—Å—è %.</div>
          </div>
        </div>

        <div class="row">
          <div>
            <label>–ü–æ—á–∞—Ç–∫–æ–≤–∞ —Å—É–º–∞ (P0)</label>
            <input id="p0" type="number" min="0" step="0.01" value="0">
          </div>
          <div>
            <label>–©–æ–º—ñ—Å—è—á–Ω–∏–π –≤–Ω–µ—Å–æ–∫ (PMT)</label>
            <input id="pmt" type="number" min="0" step="0.01" value="100">
          </div>
        </div>

        <div class="row">
          <div>
            <label>–†—ñ—á–Ω–∞ —Å—Ç–∞–≤–∫–∞, %</label>
            <input id="rate" type="number" min="0" step="0.01" value="10">
            <!-- –ü—Ä–µ—Å–µ—Ç–∏ —Å—Ç–∞–≤–æ–∫ -->
            <div class="pill-tabs" id="ratePresets" style="margin-top:8px">
              <button type="button" data-v="5">5%</button>
              <button type="button" data-v="8">8%</button>
              <button type="button" class="active" data-v="10">10%</button>
              <button type="button" data-v="12">12%</button>
            </div>

            <details class="muted-box" style="margin-top:6px">
              <summary style="cursor:pointer"><b>–ü—ñ–¥–∫–∞–∑–∫–∞ —â–æ–¥–æ –æ—Ä—ñ—î–Ω—Ç–æ–≤–Ω–æ—ó –¥–æ—Ö—ñ–¥–Ω–æ—Å—Ç—ñ (—É $)</b></summary>
              <div class="hint" style="margin-top:8px; line-height:1.6">
                ‚Ä¢ –î–µ–ø–æ–∑–∏—Ç–∏ / –û–í–î–ü / –î–µ—Ä–∂. –æ–±–ª—ñ–≥–∞—Ü—ñ—ó –°–®–ê ‚Äî ~1,5‚Äì6% —Ä—ñ—á–Ω–∏—Ö.<br>
                ‚Ä¢ –®–∏—Ä–æ–∫–∏–π —ñ–Ω–¥–µ–∫—Å –∞–∫—Ü—ñ–π ‚Äî ~10‚Äì11% —Ä/—Ä —É –¥–æ–≤–≥–æ—Å—Ç—Ä–æ–∫—ñ (–≤–æ–ª–∞—Ç–∏–ª—å–Ω—ñ).<br>
                ‚Ä¢ –ü–æ—Ä—Ç—Ñ–µ–ª—å 60/40 ‚Äî ~5‚Äì8% —Ä/—Ä.<br><br>
                ‚ö†Ô∏è –¶–µ –Ω–µ —ñ–Ω–≤–µ—Å—Ç–ø–æ—Ä–∞–¥–∞. –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ 5%, 8%, 10%, 12%.
              </div>
            </details>
          </div>
          <div>
            <label>–¢–µ—Ä–º—ñ–Ω —ñ–Ω–≤–µ—Å—Ç—É–≤–∞–Ω–Ω—è</label>
            <div class="term-wrap">
              <input class="term-num" id="termNum" type="number" min="1" step="1" value="5">
              <div class="pill-tabs" role="tablist">
                <button id="termYears" class="active" type="button">—Ä–æ–∫–∏</button>
                <button id="termMonths" type="button">–º—ñ—Å—è—Ü—ñ</button>
              </div>
            </div>
          </div>
        </div>

        <div class="inline" style="margin-top:12px">
          <button id="calcBtn" class="btn">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏</button>
          <a class="btn btn-link" href="https://www.instagram.com/kristina_bessolova" target="_blank" rel="noopener">–û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é</a>
        </div>
      </div>

      <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç -->
      <div class="card">
        <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç</h2>
        <div class="muted-box" style="margin-bottom:10px">
          <div id="headline" class="summary">‚Äî</div>
          <div id="subline" class="lead">‚Äî</div>
        </div>
        <div class="muted-box" style="padding:12px">
          <canvas id="chart"></canvas>
        </div>
        <div class="muted-box" style="margin-top:10px; overflow:auto; max-height:320px">
          <table id="tablePreview">
            <thead>
              <tr>
                <th>–ü–µ—Ä—ñ–æ–¥</th>
                <th>–í–ª–∞—Å–Ω—ñ –∫–æ—à—Ç–∏</th>
                <th>–ù–∞—Ä–∞—Ö. %</th>
                <th>–†–∞–∑–æ–º –Ω–∞ –∫—ñ–Ω.</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- –¶—ñ–ª—ñ -->
    <div class="card" style="margin-top:16px">
      <h2>üéØ –¶—ñ–ª—ñ ‚Äî –æ–∫—Ä–µ–º–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</h2>
      <div class="lead" style="margin-bottom:8px">
        –ü—Ä–∞—Ü—é—î –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –±–∞–∑–æ–≤–æ–≥–æ. –í–∫–∞–∂–∏ <b>—Ü—ñ–ª—å–æ–≤—É —Å—É–º—É</b>, —Å—Ç–∞–≤–∫—É —Ç–∞ –∫–∞–ø—ñ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—é. –û–±–µ—Ä–∏, —â–æ —Ä–∞—Ö—É–≤–∞—Ç–∏:
        <u>–Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–π –≤–Ω–µ—Å–æ–∫</u>, <u>–º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ç–µ—Ä–º—ñ–Ω</u> –∞–±–æ <u>–Ω–µ–æ–±—Ö—ñ–¥–Ω—É —Å—Ç–∞—Ä—Ç–æ–≤—É —Å—É–º—É</u>.
      </div>

      <div class="row3">
        <div>
          <label>–¶—ñ–ª—å–æ–≤–∞ —Å—É–º–∞</label>
          <input id="goalTarget" type="number" min="1" step="0.01" value="100000">
        </div>
        <div>
          <label>–ü–æ—á–∞—Ç–∫–æ–≤–∞ —Å—É–º–∞ (P0)</label>
          <input id="goalP0" type="number" min="0" step="0.01" value="0">
        </div>
        <div>
          <label>–†—ñ—á–Ω–∞ —Å—Ç–∞–≤–∫–∞, %</label>
          <input id="goalRate" type="number" min="0" step="0.01" value="10">
          <!-- –ü—Ä–µ—Å–µ—Ç–∏ —Å—Ç–∞–≤–æ–∫ —É —Ü—ñ–ª—è—Ö -->
          <div class="pill-tabs" id="goalRatePresets" style="margin-top:8px">
            <button type="button" data-v="5">5%</button>
            <button type="button" data-v="8">8%</button>
            <button type="button" class="active" data-v="10">10%</button>
            <button type="button" data-v="12">12%</button>
          </div>

          <details class="muted-box" style="margin-top:6px">
            <summary style="cursor:pointer"><b>–ü—ñ–¥–∫–∞–∑–∫–∞ —â–æ–¥–æ –æ—Ä—ñ—î–Ω—Ç–æ–≤–Ω–æ—ó –¥–æ—Ö—ñ–¥–Ω–æ—Å—Ç—ñ (—É $)</b></summary>
            <div class="hint" style="margin-top:8px; line-height:1.6">
              ‚Ä¢ –î–µ–ø–æ–∑–∏—Ç–∏ / –û–í–î–ü / Treasuries ‚Äî ~1,5‚Äì6% —Ä/—Ä.<br>
              ‚Ä¢ –®–∏—Ä–æ–∫–∏–π —ñ–Ω–¥–µ–∫—Å –∞–∫—Ü—ñ–π ‚Äî ~10‚Äì11% —Ä/—Ä —É –¥–æ–≤–≥–æ—Å—Ç—Ä–æ–∫—ñ (–≤–æ–ª–∞—Ç–∏–ª—å–Ω—ñ).<br>
              ‚Ä¢ –ü–æ—Ä—Ç—Ñ–µ–ª—å 60/40 ‚Äî ~5‚Äì8% —Ä/—Ä.<br><br>
              –¶–µ –Ω–µ –ø–æ—Ä–∞–¥–∞. –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ 8% / 10% / 12%.
            </div>
          </details>
        </div>
      </div>

      <div class="row">
        <div>
          <label>–ß–∞—Å—Ç–æ—Ç–∞ –∫–∞–ø—ñ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—ó</label>
          <select id="goalM">
            <option value="12" selected>–ú—ñ—Å—è—á–Ω–æ (12√ó/—Ä—ñ–∫)</option>
            <option value="4">–ö–≤–∞—Ä—Ç–∞–ª—å–Ω–æ (4√ó/—Ä—ñ–∫)</option>
            <option value="2">–ü—ñ–≤—Ä—ñ—á–Ω–æ (2√ó/—Ä—ñ–∫)</option>
            <option value="1">–†—ñ—á–Ω–æ (1√ó/—Ä—ñ–∫)</option>
          </select>
        </div>
        <div>
          <label>–©–æ–º—ñ—Å—è—á–Ω–∏–π –≤–Ω–µ—Å–æ–∫ (—è–∫—â–æ —Ä–∞—Ö—É—î–º–æ —Ç–µ—Ä–º—ñ–Ω)</label>
          <input id="goalPMT" type="number" min="0" step="0.01" value="200">
        </div>
      </div>

      <div class="row">
        <div>
          <label>–¢–µ—Ä–º—ñ–Ω —ñ–Ω–≤–µ—Å—Ç—É–≤–∞–Ω–Ω—è (–¥–ª—è ¬´—Ä–∞—Ö—É–≤–∞—Ç–∏ –≤–Ω–µ—Å–æ–∫¬ª –∞–±–æ ¬´—Ä–∞—Ö—É–≤–∞—Ç–∏ P0¬ª)</label>
          <div class="term-wrap">
            <input class="term-num" id="goalTermNum" type="number" min="1" step="1" value="20">
            <div class="pill-tabs">
              <button id="goalTermYears" class="active" type="button">—Ä–æ–∫–∏</button>
              <button id="goalTermMonths" type="button">–º—ñ—Å—è—Ü—ñ</button>
            </div>
          </div>
        </div>
        <div>
          <label>–©–æ –ø–æ—Ä–∞—Ö—É–≤–∞—Ç–∏</label>
          <select id="goalMode">
            <option value="pmt" selected>–ù–µ–æ–±—Ö—ñ–¥–Ω–∏–π —â–æ–º—ñ—Å—è—á–Ω–∏–π –≤–Ω–µ—Å–æ–∫</option>
            <option value="term">–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ç–µ—Ä–º—ñ–Ω (–∑–∞ –∑–∞–¥–∞–Ω–∏–º PMT)</option>
            <option value="p0">–ù–µ–æ–±—Ö—ñ–¥–Ω—É —Å—Ç–∞—Ä—Ç–æ–≤—É —Å—É–º—É (P0)</option>
          </select>
        </div>
      </div>

      <div class="inline" style="margin-top:12px">
        <button id="goalCalcBtn" class="btn">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ —Ü—ñ–ª—å</button>
      </div>

      <div class="muted-box" style="margin-top:12px">
        <b>–ü–æ—è—Å–Ω–µ–Ω–Ω—è:</b> —Ç–∞–±–ª–∏—Ü—è –Ω–∏–∂—á–µ –ø–æ–∫–∞–∑—É—î, —è–∫ –∑–º—ñ–Ω–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏ –∑–º—ñ–Ω—ñ –≤–Ω–µ—Å–∫—É. –¶–µ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î
        –µ—Ñ–µ–∫—Ç —Å–∫–ª–∞–¥–Ω–æ–≥–æ –≤—ñ–¥—Å–æ—Ç–∫–∞ ‚Äî –∑–±—ñ–ª—å—à–µ–Ω–Ω—è –≤–Ω–µ—Å–∫—É –ø—Ä–∏—Å–∫–æ—Ä—é—î –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—è —Ü—ñ–ª—ñ.
      </div>

      <div class="muted-box" style="margin-top:10px; overflow:auto">
        <div class="badge">–í–∞—Ä—ñ–∞—Ü—ñ—ó –∑–∞ –≤–Ω–µ—Å–∫–æ–º (–µ—Ñ–µ–∫—Ç —Å–∫–ª–∞–¥–Ω–æ–≥–æ %)</div>
        <table id="mixTable" style="margin-top:8px">
          <thead><tr><th>–°—Ü–µ–Ω–∞—Ä—ñ–π</th><th>–í–Ω–µ—Å–æ–∫/–º—ñ—Å</th><th>–ú—ñ–Ω. —Ç–µ—Ä–º—ñ–Ω –¥–æ —Ü—ñ–ª—ñ</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>

      <div class="muted-box" style="margin-top:10px; overflow:auto">
        <div class="badge">–°—Ç–∞–≤–∫–∞: –ø–µ—Å–∏–º—ñ—Å—Ç–∏—á–Ω–∏–π / —Ä–µ–∞–ª—ñ—Å—Ç–∏—á–Ω–∏–π / –æ–ø—Ç–∏–º—ñ—Å—Ç–∏—á–Ω–∏–π</div>
        <table id="rateScenarios" style="margin-top:8px">
          <thead><tr><th>–°—Ü–µ–Ω–∞—Ä—ñ–π</th><th>–°—Ç–∞–≤–∫–∞</th><th>–ú—ñ–Ω. —Ç–µ—Ä–º—ñ–Ω –¥–æ —Ü—ñ–ª—ñ</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </div>

    <p class="lead" style="opacity:.7; margin-top:12px">‚ÑπÔ∏è –û—Å–≤—ñ—Ç–Ω—ñ–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç. –†–æ–∑—Ä–∞—Ö—É–Ω–∫–∏ ‚Äî –º–æ–¥–µ–ª—å–Ω—ñ. –ù–µ —î —ñ–Ω–≤–µ—Å—Ç–ø–æ—Ä–∞–¥–æ—é.</p>
  </div>

<script>
/* ===== –£—Ç–∏–ª—ñ—Ç–∏ ===== */
const fmtMoney = (x, cur='USD') =>
  new Intl.NumberFormat('uk-UA', { style:'currency', currency:cur, maximumFractionDigits:2 }).format(x);

const fmtTerm = (months) => {
  months = Math.max(0, Math.round(months));
  const y = Math.floor(months/12);
  const m = months % 12;
  if (y===0) return `${m} –º—ñ—Å.`;
  return `${months} –º—ñ—Å. (${y} —Ä. ${m} –º—ñ—Å.)`;
};

function monthsFrom(termNum, unitYears){ return unitYears ? termNum*12 : termNum; }

/* –°–∫–ª–∞–¥–∞–Ω–Ω—è –∑ –∫–∞–ø—ñ—Ç–∞–ª—ñ–∑–∞—Ü—ñ—î—é m —Ä–∞–∑/—Ä—ñ–∫, –≤–Ω–µ—Å–æ–∫ —â–æ–º—ñ—Å—è—á–Ω–∏–π */
function simulate(P0, PMT, rAnnual, mPerYear, totalMonths){
  const i = rAnnual / mPerYear;
  const accEvery = Math.round(12 / mPerYear);
  let bal = P0, own = P0;
  const tTotal=[], tOwn=[];
  for (let t=1; t<=totalMonths; t++){
    bal += PMT; own += PMT;
    if (t % accEvery === 0){ bal += bal * i; }
    tTotal.push(bal); tOwn.push(own);
  }
  return { final: bal, ownFinal: own, tTotal, tOwn };
}

function minMonthsToTarget(P0, PMT, rAnnual, mPerYear, target, cap=1000*12){
  let lo=1, hi=cap, ans=cap;
  while (lo<=hi){
    const mid = (lo+hi)>>1;
    const s = simulate(P0, PMT, rAnnual, mPerYear, mid).final;
    if (s >= target){ ans=mid; hi=mid-1; } else lo=mid+1;
  }
  return ans;
}

function requiredPMT(P0, rAnnual, mPerYear, months, target){
  let lo=0, hi=Math.max(10, target/Math.max(1,months));
  for (let k=0;k<40;k++){
    const mid=(lo+hi)/2;
    const s=simulate(P0, mid, rAnnual, mPerYear, months).final;
    if (s>=target) hi=mid; else lo=mid;
  }
  return hi;
}
function requiredP0(PMT, rAnnual, mPerYear, months, target){
  let lo=0, hi=target;
  for (let k=0;k<40;k++){
    const mid=(lo+hi)/2;
    const s=simulate(mid, PMT, rAnnual, mPerYear, months).final;
    if (s>=target) hi=mid; else lo=mid;
  }
  return hi;
}

/* ===== –ë–∞–∑–æ–≤–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä ===== */
let chart;
function renderChart(labels, own, total, cur){
  const ctx = document.getElementById('chart');
  if (chart) chart.destroy();
  const nf = new Intl.NumberFormat('uk-UA', { style:'currency', currency:cur, maximumFractionDigits:0 });
  chart = new Chart(ctx, {
    type:'line',
    data:{
      labels,
      datasets:[
        { label:'–í–ª–∞—Å–Ω—ñ –∫–æ—à—Ç–∏', data:own, borderWidth:2, tension:.25 },
        { label:'–†–∞–∑–æ–º (–∑ –≤—ñ–¥—Å–æ—Ç–∫–∞–º–∏)', data:total, borderWidth:2, tension:.25 }
      ]
    },
    options:{
      plugins:{ legend:{ position:'bottom' } },
      scales:{
        x:{ grid:{ display:false } },
        y:{ ticks:{ callback: (v)=> nf.format(v) } }
      }
    }
  });
}

function calcBase(){
  const cur = document.getElementById('currency').value;
  const m = +document.getElementById('capFreq').value;
  const P0 = +document.getElementById('p0').value || 0;
  const PMT = +document.getElementById('pmt').value || 0;
  const r = (+document.getElementById('rate').value || 0)/100;
  const unitYears = document.getElementById('termYears').classList.contains('active');
  const term = monthsFrom(+document.getElementById('termNum').value || 1, unitYears);

  const sim = simulate(P0, PMT, r, m, term);
  const labels = Array.from({length:term}, (_,i)=> i%12===0 ? `${i/12}—Ä` : '');

  renderChart(labels, sim.tOwn, sim.tTotal, cur);

  const years = (term/12)|0, months = term%12;
  document.getElementById('headline').innerHTML =
    `–ß–µ—Ä–µ–∑ <b>${years?years+' —Ä–æ–∫—ñ–≤':''} ${months?months+' –º—ñ—Å.':''}</b> –≤–∏ –º–∞—Ç–∏–º–µ—Ç–µ <b>${fmtMoney(sim.final, cur)}</b>`;
  document.getElementById('subline').innerHTML =
    `–í–ª–∞—Å–Ω—ñ –∫–æ—à—Ç–∏: ${fmtMoney(sim.ownFinal, cur)} ‚Ä¢ –ù–∞—Ä–∞—Ö–æ–≤–∞–Ω—ñ %: ${fmtMoney(sim.final - sim.ownFinal, cur)}`;

  // –ø—Ä–µ–≤'—é —Ç–∞–±–ª–∏—Ü—è (–¥–æ 120 –º—ñ—Å)
  const tb = document.querySelector('#tablePreview tbody');
  const rows = [];
  let lastOwn=P0, lastTot=P0;
  const accEvery = Math.round(12/m);
  for (let t=1;t<=Math.min(120, term);t++){
    let own = lastOwn + PMT;
    let tot = lastTot + PMT;
    let interest = 0;
    if (t % accEvery === 0){ const i = r/m; interest = tot*i; tot += interest; }
    rows.push([t, own, interest, tot]);
    lastOwn=own; lastTot=tot;
  }
  tb.innerHTML = rows.map(r => `<tr><td>${r[0]}</td><td>${fmtMoney(r[1],cur)}</td><td>${fmtMoney(r[2],cur)}</td><td>${fmtMoney(r[3],cur)}</td></tr>`).join('');
}

/* —Ç–∞–±–∏ —Ä–æ–∫—ñ–≤/–º—ñ—Å—è—Ü—ñ–≤ */
function bindTermTabs(numId, yBtnId, mBtnId){
  const num = document.getElementById(numId);
  const bY = document.getElementById(yBtnId);
  const bM = document.getElementById(mBtnId);
  bY.addEventListener('click', ()=>{ bY.classList.add('active'); bM.classList.remove('active'); if (+num.value<1) num.value=1; });
  bM.addEventListener('click', ()=>{ bM.classList.add('active'); bY.classList.remove('active'); if (+num.value<1) num.value=12; });
}
bindTermTabs('termNum','termYears','termMonths');

/* ===== –ë–ª–æ–∫ –¶—ñ–ª–µ–π ===== */
bindTermTabs('goalTermNum','goalTermYears','goalTermMonths');

function calcGoals(){
  const cur = document.getElementById('currency').value;
  const target = +document.getElementById('goalTarget').value || 0;
  const P0 = +document.getElementById('goalP0').value || 0;
  const r = (+document.getElementById('goalRate').value || 0)/100;
  const m = +document.getElementById('goalM').value;
  const PMT = +document.getElementById('goalPMT').value || 0;
  const mode = document.getElementById('goalMode').value;

  const unitYears = document.getElementById('goalTermYears').classList.contains('active');
  const months = monthsFrom(+document.getElementById('goalTermNum').value || 1, unitYears);

  // –í–∞—Ä—ñ–∞—Ü—ñ—ó –≤–Ω–µ—Å–∫–æ–º
  const mixTbody = document.querySelector('#mixTable tbody');
  const deltas = [['‚Äì20%',0.8],['–±–∞–∑–æ–≤–∏–π',1],['+20%',1.2],['+50%',1.5],['√ó2',2]];
  mixTbody.innerHTML = deltas.map(d=>{
    const p = PMT * d[1];
    const mm = minMonthsToTarget(P0, p, r, m, target);
    return `<tr><td>${d[0]}</td><td>${fmtMoney(p,cur)}</td><td>${fmtTerm(mm)}</td></tr>`;
  }).join('');

  // –°—Ü–µ–Ω–∞—Ä—ñ—ó —Å—Ç–∞–≤–æ–∫ 8/10/12
  const scen = [['–ü–µ—Å–∏–º—ñ—Å—Ç–∏—á–Ω–∏–π',.08],['–†–µ–∞–ª—ñ—Å—Ç–∏—á–Ω–∏–π',.10],['–û–ø—Ç–∏–º—ñ—Å—Ç–∏—á–Ω–∏–π',.12]];
  const rateTbody = document.querySelector('#rateScenarios tbody');
  rateTbody.innerHTML = scen.map(s=>{
    const mm = minMonthsToTarget(P0, PMT, s[1], m, target);
    return `<tr><td>${s[0]}</td><td>${(s[1]*100).toFixed(0)}%</td><td>${fmtTerm(mm)}</td></tr>`;
  }).join('');

  // –û—Å–Ω–æ–≤–Ω–∏–π headline
  let headline='';
  if (mode==='pmt'){
    const need = requiredPMT(P0, r, m, months, target);
    headline = `–ù–µ–æ–±—Ö—ñ–¥–Ω–∏–π –≤–Ω–µ—Å–æ–∫: <b>${fmtMoney(need,cur)}</b> / –º—ñ—Å –∑–∞ ${fmtTerm(months)}.`;
  } else if (mode==='term'){
    const mm = minMonthsToTarget(P0, PMT, r, m, target);
    headline = `–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ç–µ—Ä–º—ñ–Ω –¥–æ —Ü—ñ–ª—ñ –ø—Ä–∏ –≤–Ω–µ—Å–∫—É ${fmtMoney(PMT,cur)}: <b>${fmtTerm(mm)}</b>.`;
  } else {
    const need = requiredP0(PMT, r, m, months, target);
    headline = `–ù–µ–æ–±—Ö—ñ–¥–Ω–∞ —Å—Ç–∞—Ä—Ç–æ–≤–∞ —Å—É–º–∞: <b>${fmtMoney(need,cur)}</b> –∑–∞ ${fmtTerm(months)}.`;
  }
  const old = document.querySelector('.goalHeadlineBox'); if (old) old.remove();
  const box=document.createElement('div'); box.className='muted-box goalHeadlineBox'; box.style.marginTop='12px'; box.innerHTML=headline;
  document.querySelector('.card:last-of-type').insertBefore(box, document.querySelector('#mixTable').parentElement);
}

/* –ü–æ–¥—ñ—ó */
document.getElementById('calcBtn').addEventListener('click', calcBase);
document.getElementById('goalCalcBtn').addEventListener('click', calcGoals);

/* –ü—Ä–µ—Å–µ—Ç–∏ —Å—Ç–∞–≤–æ–∫ ‚Äî –±–∞–∑–æ–≤–∏–π */
document.querySelectorAll('#ratePresets button').forEach(b=>{
  b.addEventListener('click', ()=>{
    document.querySelectorAll('#ratePresets button').forEach(x=>x.classList.remove('active'));
    b.classList.add('active');
    document.getElementById('rate').value = b.dataset.v;
    calcBase();
  });
});

/* –ü—Ä–µ—Å–µ—Ç–∏ —Å—Ç–∞–≤–æ–∫ ‚Äî —Ü—ñ–ª—ñ */
document.querySelectorAll('#goalRatePresets button').forEach(b=>{
  b.addEventListener('click', ()=>{
    document.querySelectorAll('#goalRatePresets button').forEach(x=>x.classList.remove('active'));
    b.classList.add('active');
    document.getElementById('goalRate').value = b.dataset.v;
    calcGoals();
  });
});

/* –ü–µ—Ä–µ—Ä–∞—Ö—É–Ω–æ–∫ –ø—Ä–∏ –∑–º—ñ–Ω—ñ –≤–∞–ª—é—Ç–∏ ‚Äî —â–æ–± –≥—Ä–∞—Ñ—ñ–∫ –æ–¥—Ä–∞–∑—É –ø—ñ–¥—Ö–æ–ø–∏–≤ –≤–∞–ª—é—Ç—É */
document.getElementById('currency').addEventListener('change', ()=>{ calcBase(); calcGoals(); });

/* –ø–µ—Ä–≤–∏–Ω–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä */
calcBase();
</script>
</body>
</html>

